(this["webpackJsonpclient-react-redux"]=this["webpackJsonpclient-react-redux"]||[]).push([[0],{114:function(e,t){},132:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);a(87);var n=a(11),r=a(52),c=a(53),s=a.n(c),i=a(74),o=a(27),l=a(75),u=a.n(l),m=a(45),d=a.n(m),f=u()();f.on("connect",(function(){d()("chat:socket")("Connected.")})),f.on("disconnect",(function(){d()("chat:socket")("Disconnected.")})),f.on("chat",(function(e){d()("chat:socket")("Received message:",e)}));var g,p=f,h=(Object(o.createAsyncThunk)("chat/loadAllMessages",Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),Object(o.createAsyncThunk)("chat/sendMessage",(function(e){p.emit("chat",e)}))),v=Object(o.createSlice)({name:"chat",initialState:{messages:[]},reducers:{truncateMessages:function(e){e.messages.length=0},sendMessage:function(e,t){var a=t.payload,n=a.time,r=a.sender,c=a.text;e.messages.push({time:n,sender:r,text:c,status:"sent"})},receiveMessage:function(e,t){var a=t.payload,n=a.time,r=a.sender,c=a.text;e.messages.push({time:n,sender:r,text:c,status:"received"})}},extraReducers:(g={},Object(n.a)(g,h.pending,(function(e,t){var a=t.meta.arg;e.messages.push(Object(r.a)(Object(r.a)({},a),{},{status:"pending"}))})),Object(n.a)(g,h.fulfilled,(function(e,t){t.type,t.payload})),Object(n.a)(g,h.rejected,(function(e,t){t.type,t.error})),g)}),b=v.actions,E=(b.truncateMessages,b.sendMessage,b.receiveMessage),j=v.reducer,O=a(0),x=a.n(O),w=a(8),y=a.n(w),k=a(18),N=(a(132),a(171)),C=a(162),S=a(170),M=a(167),A=a(169),B=a(168),D=a(2),T=a(165),U=Object(C.a)((function(e){return{card:{margin:e.spacing(1),backgroundColor:function(e){return"received"===e.status?"white":"#dcf8c6"}}}}));function G(e){var t=e.children,a=Object(D.a)(e,["children"]),n=U(e);return x.a.createElement(T.a,Object.assign({},a,{className:n.card}),t)}var I=Object(C.a)((function(e){return{main:{flexBasis:"83%",overflowY:"auto",backgroundColor:"#e5ddd5",backgroundImage:"url(/images/bg-chat-tile-light.png)",backgroundAttachment:"fixed"},cardContent:{display:"flex",flexFlow:"column nowrap",padding:e.spacing(1)},sender:{alignSelf:"flex-start",color:"#aaa"},time:{alignSelf:"flex-end",color:"#aaa"}}})),L=Object(k.b)((function(e){return{messages:e.chat.messages}}))((function(e){var t,a=I(e),n=Object(O.useRef)();return Object(O.useEffect)((function(){var e;return null===(e=n.current)||void 0===e?void 0:e.scrollIntoView(!1)}),[e.messages]),x.a.createElement(M.a,{item:!0,component:"main",container:!0,direction:"column",wrap:"nowrap",className:a.main},null===(t=e.messages)||void 0===t?void 0:t.map((function(t,r){t.id;var c,s=t.sender,i=t.time,o=t.text,l=t.status;return x.a.createElement(M.a,{item:!0,container:!0,direction:"row",justify:"received"===l?"flex-end":"flex-start",className:a.message,key:i,ref:r===(null===(c=e.messages)||void 0===c?void 0:c.length)-1?n:null},x.a.createElement(M.a,{item:!0,xs:8},x.a.createElement(G,{sender:s,status:l},x.a.createElement(B.a,{className:a.cardContent},"received"===l&&x.a.createElement(A.a,{variant:"caption",className:a.sender},s),x.a.createElement(A.a,{variant:"body1"},o),x.a.createElement(A.a,{variant:"caption",className:a.time},i)))))})))})),R=a(19),W=a(172),q=Object(C.a)((function(e){return{}})),F={sendMessageAsync:h},J=Object(k.b)((function(e){return{sender:e.user.name}}),F)((function(e){var t=e.sender,a=e.sendMessageAsync,n=q(),r=Object(O.useState)(""),c=Object(R.a)(r,2),s=c[0],i=c[1];return x.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=new Date;a({time:n.toLocaleTimeString(),sender:t,text:s}),i("")}},x.a.createElement(W.a,{variant:"outlined",label:"Type a message",name:"text",value:s,onChange:function(e){var t=e.target.value;i(t)},fullWidth:!0,autoFocus:!0,classes:{input:n.input}}))})),z=[{id:1,name:"Girit"},{id:2,name:"Doovshanit"},{id:3,name:"Bzique"},{id:4,name:"Namir"}],V=Object(C.a)((function(e){return{container:{height:"100vh"},outerGridContainer:{height:"100%"},messageList:{height:"100%"},header:{flexBasis:"7%",backgroundColor:"#f0f0f0"},footer:{flexBasis:"7%",backgroundColor:"#f0f0f0"},input:{padding:e.spacing(1)}}}));function Y(){var e=V();return x.a.createElement(S.a,{className:e.container},x.a.createElement(M.a,{container:!0,spacing:0,className:e.outerGridContainer},x.a.createElement(M.a,{item:!0,xs:3,container:!0,direction:"column",wrap:"nowrap"},x.a.createElement(M.a,{item:!0,xs:12,component:"header",className:e.header},x.a.createElement(A.a,{variant:"h5"},"Chats")),x.a.createElement(M.a,{item:!0,xs:12,container:!0,direction:"column",wrap:"nowrap",component:"main",className:e.main},z.map((function(e){var t=e.id,a=e.name;return x.a.createElement(M.a,{item:!0,key:t},a)})))),x.a.createElement(M.a,{item:!0,xs:9,container:!0,direction:"column",wrap:"nowrap",className:e.messageList},x.a.createElement(M.a,{item:!0,component:"header",className:e.header},x.a.createElement(A.a,{variant:"h5"},"Messages")),x.a.createElement(L,null),x.a.createElement(M.a,{item:!0,container:!0,component:"footer",className:e.footer},x.a.createElement(M.a,{item:!0,xs:12,container:!0,justify:"center",className:e.input},x.a.createElement(M.a,{item:!0,xs:10},x.a.createElement(J,null)))))))}var $=a(10);var H=Object(k.b)((function(e){return{username:e.user.name}}),null)((function(e){var t=e.username,a=e.component,n=Object(D.a)(e,["username","component"]);return x.a.createElement($.b,Object.assign({},n,{render:function(e){return t?x.a.createElement(a,e):x.a.createElement($.a,{to:"/login"})}}))})),K=a(173),P=(0,a(27).createSlice)({name:"user",initialState:{name:""},reducers:{setUser:function(e,t){var a=t.payload;e.name=a}}}),Q=P.actions.setUser,X=P.reducer,Z=Object(C.a)((function(e){return{root:{margin:e.spacing(2)}}})),_=Object(k.b)(null,{setUser:Q})((function(e){var t=e.setUser,a=Object(O.useState)(""),n=Object(R.a)(a,2),r=n[0],c=n[1],s=Z(),i=Object($.g)();return x.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(r),i.push("/")}},x.a.createElement(M.a,{container:!0,justify:"center"},x.a.createElement(W.a,{variant:"outlined",required:!0,label:"Enter your name",name:"username",value:r,onChange:function(e){var t=e.target.value;c(t)},classes:s}),x.a.createElement(K.a,{variant:"contained",type:"submit",classes:s},"Enter Chat")))})),ee=a(42);var te=function(){return x.a.createElement(ee.a,null,x.a.createElement(N.a,null),x.a.createElement($.d,null,x.a.createElement($.b,{path:"/login",component:_}),x.a.createElement(H,{path:"/",component:Y})))},ae=Object(o.configureStore)({reducer:{chat:j,user:X}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.on("chat",(function(e){ae.dispatch(E(e))})),y.a.render(x.a.createElement(x.a.StrictMode,null,x.a.createElement(k.a,{store:ae},x.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},86:function(e,t,a){e.exports=a(134)},87:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.691bc251.chunk.js.map