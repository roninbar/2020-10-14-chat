(this["webpackJsonpclient-react-redux"]=this["webpackJsonpclient-react-redux"]||[]).push([[0],{109:function(e,a,t){e.exports=t(161)},110:function(e,a,t){},137:function(e,a){},155:function(e,a,t){},156:function(e,a,t){},158:function(e,a,t){},159:function(e,a,t){},161:function(e,a,t){"use strict";t.r(a);t(110);var n=t(16),r=t(64),c=t(65),s=t.n(c),l=t(87),i=t(30),o=t(88),m=t.n(o),u=t(57),d=t.n(u),g=m()();g.on("connect",(function(){d()("chat:socket")("Connected.")})),g.on("disconnect",(function(){d()("chat:socket")("Disconnected.")})),g.on("chat",(function(e){d()("chat:socket")("Received message:",e)}));var f=g,E=(Object(i.createAsyncThunk)("chat/loadAllMessages",Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),Object(i.createAsyncThunk)("chat/sendMessage",(function(e){f.emit("chat",e)}))),p=Object(i.createSlice)({name:"chat",initialState:{messages:[]},reducers:{truncateMessages:function(e){e.messages.length=0},sendMessage:function(e,a){var t=a.payload,n=t.time,r=t.sender,c=t.text;e.messages.push({time:n,sender:r,text:c,status:"sent"})},receiveMessage:function(e,a){var t=a.payload,n=t.time,r=t.sender,c=t.text;e.messages.push({time:n,sender:r,text:c,status:"received"})}},extraReducers:Object(n.a)({},E.pending,(function(e,a){var t=a.meta,n=t.requestId,c=t.arg;e.messages.push(Object(r.a)(Object(r.a)({id:n},c),{},{status:"pending"}))}))}),v=p.actions,h=(v.truncateMessages,v.sendMessage,v.receiveMessage),b=p.reducer,y=t(0),j=t.n(y),O=t(8),k=t.n(O),w=t(24),C=t(15),N=(t(155),t(212)),_=t(199),S=t(200),M=t(201),x=t(202),A=t(203),R=t(204),T=t(191),D=t(196),B=t(197),I=t(198),U=t(2),J=t(194),L=Object(T.a)((function(e){return{card:{margin:e.spacing(1),backgroundColor:function(e){return"received"===e.status?"white":"#dcf8c6"}}}}));function P(e){var a=e.children,t=Object(U.a)(e,["children"]),n=L(e);return j.a.createElement(J.a,Object.assign({},t,{className:n.card}),a)}var q=Object(T.a)((function(e){return{cardContent:{display:"flex",flexFlow:"column nowrap"},sender:{alignSelf:"flex-start",color:"#aaa"},time:{alignSelf:"flex-end",color:"#aaa"}}}));function F(e){var a=e.messages,t=q();return j.a.createElement(D.a,{item:!0,component:"main",container:!0,direction:"column",wrap:"nowrap"},a.map((function(e){var a=e.id,n=e.sender,r=e.time,c=e.text,s=e.status;return j.a.createElement(D.a,{item:!0,container:!0,direction:"row",justify:"pending"===s||"sent"===s?"flex-start":"flex-end",className:t.message,key:a},j.a.createElement(D.a,{item:!0,xs:8},j.a.createElement(P,{sender:n,status:s},j.a.createElement(B.a,{className:t.cardContent},"received"===s&&j.a.createElement(I.a,{variant:"caption",className:t.sender},n),j.a.createElement(I.a,{variant:"body1"},c),j.a.createElement(I.a,{variant:"caption",className:t.time},r)))))})))}t(156);var W={sendMessageAsync:E},Y=Object(w.b)((function(e){return{username:e.user.name,messages:e.chat.messages}}),W)((function(e){var a=e.username,t=e.messages,n=e.sendMessageAsync,r=Object(y.useState)(""),c=Object(C.a)(r,2),s=c[0],l=c[1];Object(y.useEffect)((function(){i.current&&i.current.scrollIntoView()}),[t]);var i=Object(y.useRef)(null);return j.a.createElement("div",{className:"chat"},j.a.createElement("div",{className:"chat__header"},j.a.createElement(N.a,{src:(void 0,null)}),j.a.createElement("div",{className:"chat__headerInfo"},j.a.createElement("h3",null,(void 0,"Room name"))),j.a.createElement("div",{className:"chat__headerRight"},j.a.createElement(_.a,null,j.a.createElement(S.a,null)),j.a.createElement(_.a,null,j.a.createElement(M.a,null)))),j.a.createElement("div",{className:"chat__body"},j.a.createElement(F,{messages:t}),j.a.createElement("div",{ref:i})),j.a.createElement("div",{className:"chat__footer"},j.a.createElement(_.a,null,j.a.createElement(x.a,null)),j.a.createElement(_.a,null,j.a.createElement(A.a,null)),j.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new Date;n({time:t.toLocaleTimeString("he-IL"),sender:a,text:s}),l("")}},j.a.createElement("input",{type:"text",value:s,onChange:function(e){var a=e.target.value;return l(a)},placeholder:"Type a message"}),j.a.createElement("button",{type:"submit"},"Send")),j.a.createElement(_.a,null,j.a.createElement(R.a,null))))})),G=t(10);var K=Object(w.b)((function(e){return{username:e.user.name}}),null)((function(e){var a=e.username,t=e.component,n=Object(U.a)(e,["username","component"]);return j.a.createElement(G.b,Object.assign({},n,{render:function(e){return a?j.a.createElement(t,e):j.a.createElement(G.a,{to:"/login"})}}))})),V=t(206),$=t(209),z=t(211),H=t(210),Q=t(162),X=t(205),Z=t(95),ee=t.n(Z),ae=t(94),te=t.n(ae),ne=t(96),re=t.n(ne),ce=t(98),se=t.n(ce),le=t(93);t(158);var ie=function(e){var a,t,n,r;return e.typing&&(r=j.a.createElement("div",{className:"sidebarChat__typing"},"Typing...")),j.a.createElement("div",{className:"sidebarChat",onClick:function(){e.onSideBarClicked(e)}},j.a.createElement(N.a,{src:null!==(a=e.picture)&&void 0!==a?a:void 0}),j.a.createElement("div",{className:"sidebarChat__info"},j.a.createElement("h2",null,null!==(t=e.name)&&void 0!==t?t:"Room Name"),j.a.createElement("p",null,null!==(n=e.lastMessage)&&void 0!==n?n:"Room Name"),r))};t(159);var oe=function(e){var a=e.onSideBarClicked,t=j.a.useState(!1),n=Object(C.a)(t,2),r=n[0],c=n[1],s=j.a.useRef(null);function l(e){var a;(null===(a=s.current)||void 0===a?void 0:a.contains(e.target))||c(!1)}function i(e){a(e)}function o(e){"Tab"===e.key&&(e.preventDefault(),c(!1))}var m=le.map((function(e,a){return j.a.createElement(ie,{id:e.id,key:a,typing:e.typing,picture:e.picture,name:e.name,lastMessage:e.lastMessage,onSideBarClicked:i})})),u=j.a.useRef(r);return j.a.useEffect((function(){!0===u.current&&!1===r&&s.current.focus(),u.current=r}),[r]),j.a.createElement("div",{className:"sidebar"},j.a.createElement("div",{className:"sidebar__header"},j.a.createElement(N.a,{src:"Assets/me.png"}),j.a.createElement("div",{className:"sidebar__headerRight"},j.a.createElement(_.a,{title:"Status"},j.a.createElement(te.a,null)),j.a.createElement(_.a,{title:"New Chat"},j.a.createElement(ee.a,null)),j.a.createElement(_.a,{title:"Menu",ref:s,"aria-controls":r?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){c((function(e){return!e}))}},j.a.createElement(re.a,null)),j.a.createElement(X.a,{open:r,anchorEl:s.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var a=e.TransitionProps,t=e.placement;return j.a.createElement($.a,Object.assign({},a,{style:{transformOrigin:"bottom"===t?"center top":"center bottom"}}),j.a.createElement(Q.a,null,j.a.createElement(V.a,{onClickAway:l},j.a.createElement(H.a,{autoFocusItem:r,id:"menu-list-grow",onKeyDown:o},j.a.createElement(z.a,{onClick:l},"New Group"),j.a.createElement(z.a,{onClick:l},"Create a room"),j.a.createElement(z.a,{onClick:l},"Profile"),j.a.createElement(z.a,{onClick:l},"Archived"),j.a.createElement(z.a,{onClick:l},"Starred"),j.a.createElement(z.a,{onClick:l},"Setting"),j.a.createElement(z.a,{onClick:l},"Log out")))))})))),j.a.createElement("div",{className:"sidebar__search"},j.a.createElement("div",{className:"sidebar__searchContainer"},j.a.createElement(se.a,null),j.a.createElement("input",{type:"text",placeholder:"Search or start new chat"}))),j.a.createElement("div",{className:"sidebar__chats"},m))},me=t(208),ue=t(207),de=(0,t(30).createSlice)({name:"user",initialState:{name:""},reducers:{setUser:function(e,a){var t=a.payload;e.name=t}}}),ge=de.actions.setUser,fe=de.reducer,Ee=Object(T.a)((function(e){return{root:{margin:e.spacing(2)}}})),pe=Object(w.b)(null,{setUser:ge})((function(e){var a=e.setUser,t=Object(y.useState)(""),n=Object(C.a)(t,2),r=n[0],c=n[1],s=Ee(),l=Object(G.g)();return j.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(r),l.push("/")}},j.a.createElement(D.a,{container:!0,justify:"center"},j.a.createElement(me.a,{variant:"outlined",required:!0,label:"Enter your name",name:"username",value:r,onChange:function(e){var a=e.target.value;c(a)},classes:s}),j.a.createElement(ue.a,{variant:"contained",type:"submit",classes:s},"Enter Chat")))})),ve=t(52);function he(){var e=Object(y.useState)({}),a=Object(C.a)(e,2),t=a[0],n=a[1];return j.a.createElement("div",{className:"app"},j.a.createElement("div",{className:"app__body"},j.a.createElement(oe,{onSideBarClicked:function(e){(null===e||void 0===e?void 0:e.id)&&n(e)}}),j.a.createElement(Y,{chatData:t})))}var be=function(){return j.a.createElement(ve.a,null,j.a.createElement(G.d,null,j.a.createElement(G.b,{exact:!0,path:"/login",component:pe}),j.a.createElement(K,{exact:!0,path:"/",component:he})))},ye=Object(i.configureStore)({reducer:{chat:b,user:fe}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.on("chat",(function(e){ye.dispatch(h(e))})),k.a.render(j.a.createElement(j.a.StrictMode,null,j.a.createElement(w.a,{store:ye},j.a.createElement(be,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},93:function(e){e.exports=JSON.parse('[{"id":1,"picture":"Assets/1.png","name":"\u05d0\u05d5\u05db\u05dc","lastMessage":"You were added"},{"id":2,"picture":"Assets/2.jpg","name":"\u05e2\u05d2\u05dc\u05d5\u05ea","lastMessage":"\u05d7\u05d7\u05d7\u05d7\u05d7\u05d7","typing":true,"chat":[{"message":"first message","date":"19-09-20 19:31","from":"Me"},{"message":"long message, long message, long message, long message...","date":"19-09-20 19:31","from":"someone"},{"message":"short message","date":"19-09-20 19:32","from":"someone"},{"message":"hello world","date":"19-09-20 19:32","from":"Me"},{"message":"Typing...","typing":true,"date":"19-09-20 19:32","from":"Me"}]},{"id":3,"picture":"Assets/3.jpg","name":"\u05e7\u05e4\u05d4 \u05d5\u05de\u05d0\u05e4\u05d4\u2615\ud83c\udf6a","lastMessage":"\u05d5\u05d5\u05d0\u05d9, \u05de\u05e2\u05e0\u05d9\u05d9\u05df \u05de\u05d4 \u05d9\u05d4\u05d9\u05d4 \u05d1\u05db\u05d9\u05e4\u05d5\u05e8 \ud83d\ude05"},{"id":4,"picture":"Assets/4.jpg","name":"\u05d1\u05d5\u05e7\u05e8\u05d4\u05de\u05d5\u05d1\u05d9\u05e5\u05f3 \ud83d\ude1b","lastMessage":"\u05d1\u05d5\u05e7\u05e8 \u05d8\u05d5\u05d1 \u05d5\u05d7\u05d2 \u05e9\u05de\u05d7 \u05d0\u05dc\u05de\u05d5\u05d2\u05d9\u2764"},{"id":5,"picture":"Assets/1.png","name":"\u05d0\u05d5\u05db\u05dc","lastMessage":"You were added"},{"id":6,"picture":"Assets/2.jpg","name":"\u05e2\u05d2\u05dc\u05d5\u05ea","lastMessage":"\u05d7\u05d7\u05d7\u05d7\u05d7\u05d7","typing":true}]')}},[[109,1,2]]]);
//# sourceMappingURL=main.62bf59a1.chunk.js.map