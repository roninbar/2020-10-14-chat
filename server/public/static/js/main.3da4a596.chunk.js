(this["webpackJsonpclient-react-redux"]=this["webpackJsonpclient-react-redux"]||[]).push([[0],{113:function(e,a){},131:function(e,a,t){},132:function(e,a,t){},133:function(e,a,t){},134:function(e,a,t){},136:function(e,a,t){"use strict";t.r(a);t(86);var n=t(9),c=t(50),r=t(51),s=t.n(r),l=t(69),i=t(18),o=t(70),m=t.n(o),u=t(42),d=t.n(u),g=m()();g.on("connect",(function(){d()("chat:socket")("Connected.")})),g.on("disconnect",(function(){d()("chat:socket")("Disconnected.")})),g.on("chat",(function(e){d()("chat:socket")("Received message:",e)}));var p=g,h=(Object(i.createAsyncThunk)("chat/loadAllMessages",Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),Object(i.createAsyncThunk)("chat/sendMessage",(function(e){p.emit("chat",e)}))),f=Object(i.createSlice)({name:"chat",initialState:{messages:[]},reducers:{truncateMessages:function(e){e.messages.length=0},sendMessage:function(e,a){var t=a.payload,n=t.time,c=t.sender,r=t.text;e.messages.push({time:n,sender:c,text:r,status:"sent"})},receiveMessage:function(e,a){var t=a.payload,n=t.time,c=t.sender,r=t.text;e.messages.push({time:n,sender:c,text:r,status:"received"})}},extraReducers:Object(n.a)({},h.pending,(function(e,a){var t=a.meta.arg;e.messages.push(Object(c.a)(Object(c.a)({},t),{},{status:"pending"}))}))}),E=f.actions,v=(E.truncateMessages,E.sendMessage,E.receiveMessage),b=f.reducer,_=t(0),y=t.n(_),k=t(5),N=t.n(k),M=t(80),C=t(12),w=(t(131),t(171)),j=t(159),S=t(160),O=t(161),x=t(162),A=t(163),R=t(164),T=(t(132),t(39)),D=function(e){var a,t=e.chatData,n=Object(_.useState)(""),c=Object(C.a)(n,2),r=c[0],s=c[1],l=Object(_.useRef)(null),i=[];if(0===Object.keys(t).length)return y.a.createElement("div",{className:"chat"});var o,m,u,d,g=T.filter((function(e){return e.id===t.id}));return g.length&&(a=g[0]).chat&&(i=a.chat),y.a.createElement("div",{className:"chat"},y.a.createElement("div",{className:"chat__header"},y.a.createElement(w.a,{src:null!==(o=null===(m=a)||void 0===m?void 0:m.picture)&&void 0!==o?o:null}),y.a.createElement("div",{className:"chat__headerInfo"},y.a.createElement("h3",null,null!==(u=null===(d=a)||void 0===d?void 0:d.name)&&void 0!==u?u:"Room name")),y.a.createElement("div",{className:"chat__headerRight"},y.a.createElement(j.a,null,y.a.createElement(S.a,null)),y.a.createElement(j.a,null,y.a.createElement(O.a,null)))),y.a.createElement("div",{className:"chat__body"},i.map((function(e,a){var t="Me"===e.from?"chat_message chat_reciever":"chat_message";return t+=e.typing?" chat__typing":"",y.a.createElement("p",{key:a,className:t},y.a.createElement("span",{className:"chat__name"},e.from),e.message,y.a.createElement("span",{className:"chat__timespan"},(new Date).toLocaleString("he-IL")))})),y.a.createElement("div",{ref:l})),y.a.createElement("div",{className:"chat__footer"},y.a.createElement(j.a,null,y.a.createElement(x.a,null)),y.a.createElement(j.a,null,y.a.createElement(A.a,null)),y.a.createElement("form",null,y.a.createElement("input",{onChange:function(e){return s(e.target.value)},value:r,placeholder:"Type a message",type:"text"}),y.a.createElement("button",{onClick:function(e){if(e.preventDefault(),i){var a={message:r,date:"19-09-20 19:32",from:"Me"};i.push(a),s(""),setTimeout((function(){l.current.scrollIntoView()}),10)}},type:"submit"},"Send a message")),y.a.createElement(j.a,null,y.a.createElement(R.a,null))))},B=(t(133),t(134),function(e){var a,t,n,c;return e.typing&&(c=y.a.createElement("div",{className:"sidebarChat__typing"},"Typing...")),y.a.createElement("div",{className:"sidebarChat",onClick:function(){e.onSideBarClicked(e)}},y.a.createElement(w.a,{src:null!==(a=e.picture)&&void 0!==a?a:void 0}),y.a.createElement("div",{className:"sidebarChat__info"},y.a.createElement("h2",null,null!==(t=e.name)&&void 0!==t?t:"Room Name"),y.a.createElement("p",null,null!==(n=e.lastMessage)&&void 0!==n?n:"Room Name"),c))}),I=t(75),J=t.n(I),L=t(76),P=t.n(L),U=t(77),W=t.n(U),Y=t(79),F=t.n(Y),G=t(167),K=t(166),V=t(165),$=t(168),q=t(170),z=t(169),H=function(e){var a=e.onSideBarClicked,t=y.a.useState(!1),n=Object(C.a)(t,2),c=n[0],r=n[1],s=y.a.useRef(null),l=function(e){s.current&&s.current.contains(e.target)||r(!1)},i=function(e){a(e)};function o(e){"Tab"===e.key&&(e.preventDefault(),r(!1))}var m=T.map((function(e,a){return y.a.createElement(B,{id:e.id,key:a,typing:e.typing,picture:e.picture,name:e.name,lastMessage:e.lastMessage,onSideBarClicked:i})})),u=y.a.useRef(c);return y.a.useEffect((function(){!0===u.current&&!1===c&&s.current.focus(),u.current=c}),[c]),y.a.createElement("div",{className:"sidebar"},y.a.createElement("div",{className:"sidebar__header"},y.a.createElement(w.a,{src:"Assets/me.png"}),y.a.createElement("div",{className:"sidebar__headerRight"},y.a.createElement(j.a,{title:"Status"},y.a.createElement(J.a,null)),y.a.createElement(j.a,{title:"New Chat"},y.a.createElement(P.a,null)),y.a.createElement(j.a,{title:"Menu",ref:s,"aria-controls":c?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){r((function(e){return!e}))}},y.a.createElement(W.a,null)),y.a.createElement($.a,{open:c,anchorEl:s.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var a=e.TransitionProps,t=e.placement;return y.a.createElement(G.a,Object.assign({},a,{style:{transformOrigin:"bottom"===t?"center top":"center bottom"}}),y.a.createElement(V.a,null,y.a.createElement(K.a,{onClickAway:l},y.a.createElement(z.a,{autoFocusItem:c,id:"menu-list-grow",onKeyDown:o},y.a.createElement(q.a,{onClick:l},"New Group"),y.a.createElement(q.a,{onClick:l},"Create a room"),y.a.createElement(q.a,{onClick:l},"Profile"),y.a.createElement(q.a,{onClick:l},"Archived"),y.a.createElement(q.a,{onClick:l},"Starred"),y.a.createElement(q.a,{onClick:l},"Setting"),y.a.createElement(q.a,{onClick:l},"Log out")))))})))),y.a.createElement("div",{className:"sidebar__search"},y.a.createElement("div",{className:"sidebar__searchContainer"},y.a.createElement(F.a,null),y.a.createElement("input",{type:"text",placeholder:"Search or start new chat"}))),y.a.createElement("div",{className:"sidebar__chats"},m))};var Q=function(){var e=Object(_.useState)({}),a=Object(C.a)(e,2),t=a[0],n=a[1];return y.a.createElement("div",{className:"app"},y.a.createElement("div",{className:"app__body"},y.a.createElement(H,{onSideBarClicked:function(e){(null===e||void 0===e?void 0:e.id)&&n(e)}}),y.a.createElement(D,{chatData:t})))},X=(0,t(18).createSlice)({name:"user",initialState:{name:""},reducers:{setUser:function(e,a){var t=a.payload;e.name=t}}}),Z=(X.actions.setUser,X.reducer),ee=Object(i.configureStore)({reducer:{chat:b,user:Z}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p.on("chat",(function(e){ee.dispatch(v(e))})),N.a.render(y.a.createElement(y.a.StrictMode,null,y.a.createElement(M.a,{store:ee},y.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},39:function(e){e.exports=JSON.parse('[{"id":1,"picture":"Assets/1.png","name":"\u05d0\u05d5\u05db\u05dc","lastMessage":"You were added"},{"id":2,"picture":"Assets/2.jpg","name":"\u05e2\u05d2\u05dc\u05d5\u05ea","lastMessage":"\u05d7\u05d7\u05d7\u05d7\u05d7\u05d7","typing":true,"chat":[{"message":"first message","date":"19-09-20 19:31","from":"Me"},{"message":"long message, long message, long message, long message...","date":"19-09-20 19:31","from":"someone"},{"message":"short message","date":"19-09-20 19:32","from":"someone"},{"message":"hello world","date":"19-09-20 19:32","from":"Me"},{"message":"Typing...","typing":true,"date":"19-09-20 19:32","from":"Me"}]},{"id":3,"picture":"Assets/3.jpg","name":"\u05e7\u05e4\u05d4 \u05d5\u05de\u05d0\u05e4\u05d4\u2615\ud83c\udf6a","lastMessage":"\u05d5\u05d5\u05d0\u05d9, \u05de\u05e2\u05e0\u05d9\u05d9\u05df \u05de\u05d4 \u05d9\u05d4\u05d9\u05d4 \u05d1\u05db\u05d9\u05e4\u05d5\u05e8 \ud83d\ude05"},{"id":4,"picture":"Assets/4.jpg","name":"\u05d1\u05d5\u05e7\u05e8\u05d4\u05de\u05d5\u05d1\u05d9\u05e5\u05f3 \ud83d\ude1b","lastMessage":"\u05d1\u05d5\u05e7\u05e8 \u05d8\u05d5\u05d1 \u05d5\u05d7\u05d2 \u05e9\u05de\u05d7 \u05d0\u05dc\u05de\u05d5\u05d2\u05d9\u2764"},{"id":5,"picture":"Assets/1.png","name":"\u05d0\u05d5\u05db\u05dc","lastMessage":"You were added"},{"id":6,"picture":"Assets/2.jpg","name":"\u05e2\u05d2\u05dc\u05d5\u05ea","lastMessage":"\u05d7\u05d7\u05d7\u05d7\u05d7\u05d7","typing":true}]')},85:function(e,a,t){e.exports=t(136)},86:function(e,a,t){}},[[85,1,2]]]);
//# sourceMappingURL=main.3da4a596.chunk.js.map